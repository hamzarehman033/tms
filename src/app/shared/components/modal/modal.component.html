<!-- Add Modal -->
<div #exampleModal class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <ng-container *ngIf="modal_type == 'add'">
            <h5 class="modal-title fw-bold" id="exampleModalLabel">{{ modal_info?.add_modal?.heading }}</h5>
            <p class="text-light mb-0">{{ modal_info?.add_modal?.description }}</p>
          </ng-container>


          <ng-container *ngIf="modal_type == 'update'">
            <h5 class="modal-title fw-bold" id="exampleModalLabel">{{ modal_info?.update_modal?.heading }}</h5>
            <p class="text-light mb-0">{{ modal_info?.update_modal?.description }}</p>
          </ng-container>

        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="form">
          <div class="row align-items-end g-3 mb-3">
            <ng-container *ngFor="let field of modal_fields">
              <!-- Input field -->
              <div class="col-md-6" *ngIf="field.type === 'text' && !field.hidden">
                <label class="form-label" [attr.for]="field.key">
                  {{ field.placeholder }}
                </label>
                <input class="form-control" [id]="field.key" [placeholder]="'Enter ' + field.placeholder" type="text"
                  [formControlName]="field.key" />
                <div class="text-danger"
                  *ngIf="form.get(field.key)?.touched && form.get(field.key)?.hasError('required')">
                  {{ field.placeholder }} is required
                </div>
              </div>

              <!-- Date Field -->
              <div class="col-md-6" *ngIf="field.type === 'date' && !field.hidden">
                <label class="form-label" [attr.for]="field.key">{{ field.placeholder }}</label>
                <input type="date" class="form-control" [id]="field.key" [placeholder]="'Enter ' + field.placeholder"
                  [formControlName]="field.key" [value]="form.get(field.key)?.value | date:'yyyy-MM-dd'" />
                <div class="text-danger"
                  *ngIf="form.get(field.key)?.touched && form.get(field.key)?.hasError('required')">
                  {{ field.placeholder }} is required
                </div>
              </div>

              <!-- Dropdown -->
              <div class="col-md-6" *ngIf="field.type === 'dropdown' && !field.hidden">
                <label class="form-label" [attr.for]="field.key">{{ field.placeholder }}</label>
                <select class="form-select" [id]="field.key" [formControlName]="field.key"
                  (change)="onFieldChange($event)">
                  <option value="" disabled selected hidden>
                    Select {{ field.placeholder }}
                  </option>
                  <option *ngFor="let option of field.options" [value]="option.value">
                    {{ option.label }}
                  </option>
                </select>
                <div class="text-danger"
                  *ngIf="form.get(field.key)?.touched && form.get(field.key)?.hasError('required')">
                  {{ field.placeholder }} is required
                </div>
              </div>
            </ng-container>

          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="close()">Cancel</button>
        <button *ngIf="modal_type == 'add'" type="button" class="btn btn-primary" (click)="addDetails()">{{
          modal_info?.add_modal?.button_name }}</button>
        <button *ngIf="modal_type == 'update'" type="button" class="btn btn-primary" (click)="updateDetails()">{{
          modal_info?.update_modal?.button_name }}</button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div #deleteModal class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" *ngIf="parameter == 'delete'">
        Are you sure you want to delete this information?
      </div>

      <div class="modal-body" *ngIf="parameter == 'reActivate'">
        Are you sure you want to re-activate?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary custom_btn" (click)="closeDelete()">No</button>
        <button type="button" class="btn btn-primary custom_btn" (click)="deleteDetails()">Yes</button>
      </div>
    </div>
  </div>
</div>